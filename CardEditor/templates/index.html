<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>卡牌模板编辑器</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css" rel="stylesheet">
    <style>
        body { padding-top: 20px; }
        .card-canvas {
            position: relative;
            width: 750px;
            height: 1050px;
            border: 1px solid #ccc;
            margin: 0 auto;
            background-color: #fff;
            overflow: hidden;
        }
        .element {
            position: absolute;
            border: 1px dashed #ccc;
            padding: 5px;
            cursor: move;
            background-color: rgba(255, 255, 255, 0.7);
        }
        .element.selected {
            border: 2px solid #007bff;
        }
        .element-text {
            min-width: 100px;
            min-height: 30px;
        }
        .element-image {
            min-width: 100px;
            min-height: 100px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .properties-panel {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
        .template-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .preview-card {
            max-width: 200px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="text-center mb-4">卡牌模板编辑器</h1>
        
        <div class="row">
            <!-- 左侧工具栏 -->
            <div class="col-md-3">
                <div class="card mb-3">
                    <div class="card-header">数据源</div>
                    <div class="card-body">
                        <form id="upload-form" enctype="multipart/form-data">
                            <div class="mb-3">
                                <label for="data-file" class="form-label">上传配表数据</label>
                                <input type="file" class="form-control" id="data-file" accept=".csv,.xlsx,.xls,.json">
                            </div>
                            <button type="submit" class="btn btn-primary">上传</button>
                        </form>
                        <div id="file-info" class="mt-3 d-none">
                            <h6>文件信息</h6>
                            <p id="file-name"></p>
                            <p id="file-rows"></p>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-3">
                    <div class="card-header">添加元素</div>
                    <div class="card-body">
                        <button id="add-text" class="btn btn-outline-primary mb-2 w-100">添加文本框</button>
                        <button id="add-image" class="btn btn-outline-primary mb-2 w-100">添加图片框</button>
                        <hr>
                        <div class="mb-3">
                            <label for="background-image" class="form-label">设置背景图</label>
                            <input type="file" class="form-control" id="background-image" accept="image/*">
                        </div>
                    </div>
                </div>
                
                <div class="card mb-3">
                    <div class="card-header">模板管理</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="template-name" class="form-label">模板名称</label>
                            <input type="text" class="form-control" id="template-name">
                        </div>
                        <button id="save-template" class="btn btn-success mb-2 w-100">保存模板</button>
                        <button id="load-template" class="btn btn-info mb-2 w-100">加载模板</button>
                        <div id="template-list" class="template-list mt-3 d-none">
                            <h6>已保存模板</h6>
                            <ul class="list-group"></ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">生成卡牌</div>
                    <div class="card-body">
                        <button id="generate-cards" class="btn btn-primary w-100" disabled>生成卡牌</button>
                        <div id="generation-info" class="mt-3 d-none">
                            <p id="generation-message"></p>
                            <a id="download-link" class="btn btn-success w-100" href="#" target="_blank">下载卡牌</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 中间画布 -->
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>卡牌画布</span>
                        <div>
                            <button id="delete-element" class="btn btn-sm btn-danger" disabled>删除元素</button>
                            <button id="clear-canvas" class="btn btn-sm btn-warning">清空画布</button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="card-canvas" id="card-canvas"></div>
                    </div>
                    <div class="card-footer">
                        <div class="row">
                            <div class="col-md-6">
                                <label for="card-width" class="form-label">宽度 (px)</label>
                                <input type="number" class="form-control" id="card-width" value="750" min="100" max="2000">
                            </div>
                            <div class="col-md-6">
                                <label for="card-height" class="form-label">高度 (px)</label>
                                <input type="number" class="form-control" id="card-height" value="1050" min="100" max="2000">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 右侧属性面板 -->
            <div class="col-md-3">
                <div class="card">
                    <div class="card-header">元素属性</div>
                    <div class="card-body properties-panel">
                        <div id="no-selection" class="text-center">
                            <p>请选择一个元素来编辑属性</p>
                        </div>
                        
                        <div id="text-properties" class="d-none">
                            <div class="mb-3">
                                <label for="text-content" class="form-label">文本内容</label>
                                <textarea class="form-control" id="text-content" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="text-field" class="form-label">链接数据字段</label>
                                <select class="form-control" id="text-field">
                                    <option value="">无</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="font-family" class="form-label">字体</label>
                                <select class="form-control" id="font-family">
                                    <option value="Arial">Arial</option>
                                    <option value="Verdana">Verdana</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                    <option value="Courier New">Courier New</option>
                                    <option value="SimSun">宋体</option>
                                    <option value="SimHei">黑体</option>
                                    <option value="Microsoft YaHei">微软雅黑</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="font-size" class="form-label">字号</label>
                                <input type="number" class="form-control" id="font-size" value="24" min="8" max="72">
                            </div>
                            <div class="mb-3">
                                <label for="text-color" class="form-label">颜色</label>
                                <input type="color" class="form-control" id="text-color" value="#000000">
                            </div>
                        </div>
                        
                        <div id="image-properties" class="d-none">
                            <div class="mb-3">
                                <label for="image-upload" class="form-label">上传图片</label>
                                <input type="file" class="form-control" id="image-upload" accept="image/*">
                            </div>
                            <div class="mb-3">
                                <label for="image-field" class="form-label">链接数据字段</label>
                                <select class="form-control" id="image-field">
                                    <option value="">无</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="image-width" class="form-label">宽度</label>
                                <input type="number" class="form-control" id="image-width" value="100" min="10" max="1000">
                            </div>
                            <div class="mb-3">
                                <label for="image-height" class="form-label">高度</label>
                                <input type="number" class="form-control" id="image-height" value="100" min="10" max="1000">
                            </div>
                        </div>
                        
                        <div id="position-properties">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="element-x" class="form-label">X坐标</label>
                                    <input type="number" class="form-control" id="element-x" value="0" min="0">
                                </div>
                                <div class="col-md-6">
                                    <label for="element-y" class="form-label">Y坐标</label>
                                    <input type="number" class="form-control" id="element-y" value="0" min="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 模板列表模态框 -->
    <div class="modal fade" id="templates-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">选择模板</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row" id="templates-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            let selectedElement = null;
            let dataColumns = [];
            let dataFile = null;
            let nextElementId = 1;
            
            // 初始化拖拽功能
            function initDraggable() {
                $(".element").draggable({
                    containment: "#card-canvas",
                    stop: function(event, ui) {
                        if ($(this).hasClass('selected')) {
                            updatePositionProperties($(this));
                        }
                    }
                });
            }
            
            // 添加文本元素
            $("#add-text").click(function() {
                const id = nextElementId++;
                const element = $(`<div id="element-${id}" class="element element-text" data-type="text">示例文本</div>`);
                element.css({
                    left: '50px',
                    top: '50px',
                    fontSize: '24px',
                    color: '#000000',
                    fontFamily: 'Arial'
                });
                
                $("#card-canvas").append(element);
                initDraggable();
                selectElement(element);
            });
            
            // 添加图片元素
            $("#add-image").click(function() {
                const id = nextElementId++;
                const element = $(`<div id="element-${id}" class="element element-image" data-type="image"></div>`);
                element.css({
                    left: '50px',
                    top: '50px',
                    width: '100px',
                    height: '100px',
                    backgroundColor: '#f0f0f0'
                });
                
                $("#card-canvas").append(element);
                initDraggable();
                selectElement(element);
            });
            
            // 选择元素
            $(document).on('click', '.element', function(e) {
                e.stopPropagation();
                selectElement($(this));
            });
            
            // 点击画布取消选择
            $("#card-canvas").click(function() {
                deselectElement();
            });
            
            // 选择元素函数
            function selectElement(element) {
                deselectElement();
                selectedElement = element;
                element.addClass('selected');
                $("#delete-element").prop('disabled', false);
                
                // 显示对应的属性面板
                $("#no-selection").addClass('d-none');
                $("#position-properties").removeClass('d-none');
                
                // 更新位置属性
                updatePositionProperties(element);
                
                const type = element.data('type');
                if (type === 'text') {
                    $("#text-properties").removeClass('d-none');
                    $("#image-properties").addClass('d-none');
                    
                    // 更新文本属性
                    $("#text-content").val(element.text());
                    $("#text-field").val(element.data('field') || '');
                    $("#font-family").val(element.css('fontFamily').replace(/['"]*/g, '') || 'Arial');
                    $("#font-size").val(parseInt(element.css('fontSize')) || 24);
                    $("#text-color").val(rgbToHex(element.css('color')) || '#000000');
                } else if (type === 'image') {
                    $("#image-properties").removeClass('d-none');
                    $("#text-properties").addClass('d-none');
                    
                    // 更新图片属性
                    $("#image-field").val(element.data('field') || '');
                    $("#image-width").val(parseInt(element.css('width')));
                    $("#image-height").val(parseInt(element.css('height')));
                }
            }
            
            // 取消选择元素
            function deselectElement() {
                if (selectedElement) {
                    selectedElement.removeClass('selected');
                    selectedElement = null;
                }
                
                $("#delete-element").prop('disabled', true);
                $("#no-selection").removeClass('d-none');
                $("#text-properties").addClass('d-none');
                $("#image-properties").addClass('d-none');
            }
            
            // 更新位置属性
            function updatePositionProperties(element) {
                $("#element-x").val(parseInt(element.css('left')));
                $("#element-y").val(parseInt(element.css('top')));
            }
            
            // 删除元素
            $("#delete-element").click(function() {
                if (selectedElement) {
                    selectedElement.remove();
                    deselectElement();
                }
            });
            
            // 清空画布
            $("#clear-canvas").click(function() {
                if (confirm('确定要清空画布吗？所有元素将被删除。')) {
                    $("#card-canvas").empty();
                    deselectElement();
                    $("#card-canvas").css('backgroundImage', '');
                }
            });
            
            // 文本属性变更
            $("#text-content").on('input', function() {
                if (selectedElement && selectedElement.data('type') === 'text') {
                    selectedElement.text($(this).val());
                }
            });
            
            $("#text-field").on('change', function() {
                if (selectedElement && selectedElement.data('type') === 'text') {
                    selectedElement.data('field', $(this).val());
                }
            });
            
            $("#font-family").on('change', function() {
                if (selectedElement && selectedElement.data('type') === 'text') {
                    selectedElement.css('fontFamily', $(this).val());
                }
            });
            
            $("#font-size").on('input', function() {
                if (selectedElement && selectedElement.data('type') === 'text') {
                    selectedElement.css('fontSize', $(this).val() + 'px');
                }
            });
            
            $("#text-color").on('input', function() {
                if (selectedElement && selectedElement.data('type') === 'text') {
                    selectedElement.css('color', $(this).val());
                }
            });
            
            // 图片属性变更
            $("#image-upload").on('change', function() {
                if (selectedElement && selectedElement.data('type') === 'image' && this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        selectedElement.css('backgroundImage', `url(${e.target.result})`);
                        selectedElement.data('image', e.target.result);
                    };
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            $("#image-field").on('change', function() {
                if (selectedElement && selectedElement.data('type') === 'image') {
                    selectedElement.data('field', $(this).val());
                }
            });
            
            $("#image-width").on('input', function() {
                if (selectedElement && selectedElement.data('type') === 'image') {
                    selectedElement.css('width', $(this).val() + 'px');
                }
            });
            
            $("#image-height").on('input', function() {
                if (selectedElement && selectedElement.data('type') === 'image') {
                    selectedElement.css('height', $(this).val() + 'px');
                }
            });
            
            // 位置属性变更
            $("#element-x").on('input', function() {
                if (selectedElement) {
                    selectedElement.css('left', $(this).val() + 'px');
                }
            });
            
            $("#element-y").on('input', function() {
                if (selectedElement) {
                    selectedElement.css('top', $(this).val() + 'px');
                }
            });
            
            // 卡牌尺寸变更
            $("#card-width").on('input', function() {
                $("#card-canvas").css('width', $(this).val() + 'px');
            });
            
            $("#card-height").on('input', function() {
                $("#card-canvas").css('height', $(this).val() + 'px');
            });
            
            // 设置背景图
            $("#background-image").on('change', function() {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        $("#card-canvas").css('backgroundImage', `url(${e.target.result})`);
                        $("#card-canvas").data('background', e.target.result);
                    };
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            // 上传数据文件
            $("#upload-form").submit(function(e) {
                e.preventDefault();
                const fileInput = document.getElementById('data-file');
                if (fileInput.files.length === 0) {
                    alert('请选择一个文件');
                    return;
                }
                
                const formData = new FormData();
                formData.append('file', fileInput.files[0]);
                
                $.ajax({
                    url: '/upload',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        if (response.success) {
                            dataFile = response.filename;
                            dataColumns = response.columns;
                            
                            // 更新文件信息
                            $("#file-name").text(`文件名: ${response.filename}`);
                            $("#file-rows").text(`行数: ${response.rows}`);
                            $("#file-info").removeClass('d-none');
                            
                            // 更新字段选择器
                            updateFieldSelectors(dataColumns);
                            
                            // 启用生成按钮
                            $("#generate-cards").prop('disabled', false);
                        } else {
                            alert('上传失败: ' + response.error);
                        }
                    },
                    error: function(xhr) {
                        alert('上传失败: ' + (xhr.responseJSON ? xhr.responseJSON.error : '未知错误'));
                    }
                });
            });
            
            // 更新字段选择器
            function updateFieldSelectors(columns) {
                const textField = $("#text-field");
                const imageField = $("#image-field");
                
                textField.empty().append('<option value="">无</option>');
                imageField.empty().append('<option value="">无</option>');
                
                columns.forEach(function(column) {
                    textField.append(`<option value="${column}">${column}</option>`);
                    imageField.append(`<option value="${column}">${column}</option>`);
                });
            }
            
            // 保存模板
            $("#save-template").click(function() {
                const templateName = $("#template-name").val();
                if (!templateName) {
                    alert('请输入模板名称');
                    return;
                }
                
                const templateData = getTemplateData();
                
                $.ajax({
                    url: '/save_template',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        template_name: templateName,
                        template_data: templateData
                    }),
                    success: function(response) {
                        if (response.success) {
                            alert(response.message);
                            loadTemplateList();
                        } else {
                            alert('保存失败: ' + response.error);
                        }
                    },
                    error: function(xhr) {
                        alert('保存失败: ' + (xhr.responseJSON ? xhr.responseJSON.error : '未知错误'));
                    }
                });
            });
            
            // 获取模板数据
            function getTemplateData() {
                const elements = [];
                
                $(".element").each(function() {
                    const $el = $(this);
                    const type = $el.data('type');
                    const element = {
                        type: type,
                        x: parseInt($el.css('left')),
                        y: parseInt($el.css('top'))
                    };
                    
                    if (type === 'text') {
                        element.text = $el.text();
                        element.field = $el.data('field') || '';
                        element.fontFamily = $el.css('fontFamily').replace(/['"]*/g, '');
                        element.fontSize = parseInt($el.css('fontSize'));
                        element.color = hexToRgb($el.css('color'));
                    } else if (type === 'image') {
                        element.field = $el.data('field') || '';
                        element.width = parseInt($el.css('width'));
                        element.height = parseInt($el.css('height'));
                        element.image = $el.data('image') || '';
                    }
                    
                    elements.push(element);
                });
                
                return {
                    width: parseInt($("#card-width").val()),
                    height: parseInt($("#card-height").val()),
                    background: $("#card-canvas").data('background') || '',
                    elements: elements
                };
            }
            
            // 加载模板列表
            function loadTemplateList() {
                $.ajax({
                    url: '/templates',
                    type: 'GET',
                    success: function(response) {
                        const templateList = $("#template-list ul");
                        templateList.empty();
                        
                        if (response.templates.length > 0) {
                            response.templates.forEach(function(template) {
                                templateList.append(`<li class="list-group-item template-item" data-name="${template}">${template}</li>`);
                            });
                            $("#template-list").removeClass('d-none');
                        } else {
                            $("#template-list").addClass('d-none');
                        }
                    }
                });
            }
            
            // 加载模板按钮
            $("#load-template").click(function() {
                loadTemplateList();
                const templatesModal = new bootstrap.Modal(document.getElementById('templates-modal'));
                
                // 加载模板预览
                $.ajax({
                    url: '/templates',
                    type: 'GET',
                    success: function(response) {
                        const container = $("#templates-container");
                        container.empty();
                        
                        if (response.templates.length > 0) {
                            response.templates.forEach(function(template) {
                                const card = $(`
                                    <div class="col-md-4 mb-3">
                                        <div class="card preview-card" data-name="${template}">
                                            <div class="card-body text-center">
                                                <h5 class="card-title">${template}</h5>
                                                <button class="btn btn-sm btn-primary load-template-btn">加载</button>
                                            </div>
                                        </div>
                                    </div>
                                `);
                                container.append(card);
                            });
                        } else {
                            container.html('<div class="col-12 text-center">没有保存的模板</div>');
                        }
                        
                        templatesModal.show();
                    }
                });
            });
            
            // 点击加载模板
            $(document).on('click', '.load-template-btn', function() {
                const templateName = $(this).closest('.preview-card').data('name');
                loadTemplate(templateName);
                bootstrap.Modal.getInstance(document.getElementById('templates-modal')).hide();
            });
            
            // 点击模板列表项
            $(document).on('click', '.template-item', function() {
                const templateName = $(this).data('name');
                loadTemplate(templateName);
            });
            
            // 加载模板
            function loadTemplate(templateName) {
                $.ajax({
                    url: `/template/${templateName}`,
                    type: 'GET',
                    success: function(templateData) {
                        // 清空画布
                        $("#card-canvas").empty();
                        
                        // 设置卡牌尺寸
                        $("#card-width").val(templateData.width || 750);
                        $("#card-height").val(templateData.height || 1050);
                        $("#card-canvas").css({
                            width: templateData.width + 'px',
                            height: templateData.height + 'px'
                        });
                        
                        // 设置背景
                        if (templateData.background) {
                            $("#card-canvas").css('backgroundImage', `url(${templateData.background})`);
                            $("#card-canvas").data('background', templateData.background);
                        }
                        
                        // 添加元素
                        templateData.elements.forEach(function(element) {
                            let $el;
                            if (element.type === 'text') {
                                $el = $(`<div class="element element-text" data-type="text">${element.text}</div>`);
                                $el.css({
                                    left: element.x + 'px',
                                    top: element.y + 'px',
                                    fontSize: element.fontSize + 'px',
                                    fontFamily: element.fontFamily,
                                    color: rgbToString(element.color)
                                });
                                $el.data('field', element.field || '');
                            } else if (element.type === 'image') {
                                $el = $(`<div class="element element-image" data-type="image"></div>`);
                                $el.css({
                                    left: element.x + 'px',
                                    top: element.y + 'px',
                                    width: element.width + 'px',
                                    height: element.height + 'px'
                                });
                                if (element.image) {
                                    $el.css('backgroundImage', `url(${element.image})`);
                                    $el.data('image', element.image);
                                }
                                $el.data('field', element.field || '');
                            }
                            
                            if ($el) {
                                $("#card-canvas").append($el);
                                nextElementId++;
                            }
                        });
                        
                        // 初始化拖拽
                        initDraggable();
                        
                        // 更新模板名称
                        $("#template-name").val(templateName);
                    },
                    error: function() {
                        alert('加载模板失败');
                    }
                });
            }
            
            // 生成卡牌
            $("#generate-cards").click(function() {
                if (!dataFile) {
                    alert('请先上传数据文件');
                    return;
                }
                
                const templateData = getTemplateData();
                
                $.ajax({
                    url: '/generate_cards',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        template_data: templateData,
                        data_file: dataFile
                    }),
                    success: function(response) {
                        if (response.success) {
                            $("#generation-message").text(response.message);
                            $("#download-link").attr('href', response.download_url);
                            $("#generation-info").removeClass('d-none');
                        } else {
                            alert('生成卡牌失败: ' + response.error);
                        }
                    },
                    error: function(xhr) {
                        alert('生成卡牌失败: ' + (xhr.responseJSON ? xhr.responseJSON.error : '未知错误'));
                    }
                });
            });
            
            // 辅助函数：RGB转十六进制
            function rgbToHex(rgb) {
                if (!rgb) return '#000000';
                
                // 处理rgb(r, g, b)格式
                const match = rgb.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
                if (match) {
                    return '#' + (
                        (1 << 24) + 
                        (parseInt(match[1]) << 16) + 
                        (parseInt(match[2]) << 8) + 
                        parseInt(match[3])
                    ).toString(16).slice(1);
                }
                
                return rgb;
            }
            
            // 辅助函数：十六进制转RGB数组
            function hexToRgb(hex) {
                if (!hex) return [0, 0, 0];
                
                // 处理rgb(r, g, b)格式
                const match = hex.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
                if (match) {
                    return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])];
                }
                
                // 处理十六进制格式
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? [
                    parseInt(result[1], 16),
                    parseInt(result[2], 16),
                    parseInt(result[3], 16)
                ] : [0, 0, 0];
            }
            
            // 辅助函数：RGB数组转字符串
            function rgbToString(rgb) {
                if (Array.isArray(rgb) && rgb.length === 3) {
                    return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;
                }
                return '#000000';
            }
        });
    </script>
</body>
</html>